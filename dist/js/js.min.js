"use strict";var Utils=function(){function e(e){return e.sort(function(e,t){return e>t?1:e<t?-1:0}).map(function(e,t){return{id:t,name:e}})}function t(e,t){return e.sort(function(e,n){return e[t]>n[t]?1:e[t]<n[t]?-1:0}).map(function(e,t){return e.id=t,e})}function n(e,t){function n(e,t){return e[t]}return t.split(".").reduce(n,e)}var r={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return r.Android()||r.BlackBerry()||r.iOS()||r.Opera()||r.Windows()}};return{isMobile:r,indexSortArray:e,indexSortArrayObj:t,bindItemProperty:n}}(),NUM_BOOK=1e6,ITEM_NUM_PER_PAGE=6,authorName=Utils.indexSortArrayObj([{name:"William Shakespeare",gender:0},{name:"George Orwell",gender:0},{name:"George Elliot",gender:1},{name:"Friedrich Nietzsche",gender:0},{name:"Jane Austen",gender:1},{name:"Virginia Wolf",gender:1},{name:"Agatha Christie",gender:1},{name:"George R.R. Martin",gender:0},{name:"Edgard Allan Poe",gender:0},{name:"Angela Carter",gender:1},{name:"Oscar Wilde",gender:0},{name:"Marcel Proust",gender:0},{name:"Anne Frank",gender:1},{name:"Charlotte Bronte",gender:1},{name:"Giovanni Pascoli",gender:0},{name:"Juan Goytisolo",gender:0},{name:"J.K Rowling",gender:1},{name:"Zadie Smith",gender:1},{name:"Jack Kerouac",gender:0},{name:"Margaret Atwood",gender:1},{name:"J.R.R. Tolkien",gender:0},{name:"Shirley Jackson",gender:1}],"name"),genre=Utils.indexSortArray(["adventure","mystery","horror","fantasy","children","romance","finance","manga","sport","computer science"]),genreCover={adventure:"/img/book5.jpg",mystery:"/img/book8.jpg",horror:"/img/book4.jpg",fantasy:"/img/book7.jpg",children:"/img/book6.jpg",romance:"/img/book9.jpg",finance:"/img/book2.jpg",manga:"/img/book3.jpg",sport:"/img/book1.jpg","computer science":"/img/book0.jpg"},special=Utils.indexSortArrayObj([{title:"Finance books published Last Friday any month",key:"finance"},{title:"Horror books published on Halloween",key:"horror"}]),bookName={firstPart:Utils.indexSortArray(["No one like","Vorrei dirlo in italiano ma ","Lord of the ring to ","If you don t try maybe","The Coldness of","The Journey to","Altered by","A Parallel of","Broken Mind by","Assassin Creed in","Wind of the Winter and","Queen of","Play hard and","Tequila Boom boom of","My point of view is ","Mazinga fight for","Jeeg Robot win against","One two three for ","Zorro animal and","One Piece beat all for","Zoolander beat you in","Legends of tomorrow for"]),secondPart:Utils.indexSortArray([" the Coming Order"," quanto mi piace il calcio"," the relationship of command"," funny androids"," rest in peace"," winter is coming"," the crazy town"," tomato war"," the art of war"," banana split"," peter griffin"," miri mari muuuu"," forza milan"," surfers"," ice and flames"," dragon age"," game of thrones"," time traveller"," el pepita"," wanna be"," children of the light"," vida"])},Book=function(e){this.id=e,this.idOrderName=0,this.name="",this.author="",this.genre="",this.pdate="",this.init()};Book.prototype.init=function(){return this.generatorName(),this.generatorAuthor(),this.generatorGenre(),this.generatorPublishDate(),this},Book.prototype.generatorName=function(){var e=bookName.firstPart[Math.floor(Math.random()*bookName.firstPart.length)],t=bookName.secondPart[Math.floor(Math.random()*bookName.secondPart.length)];this.idOrderName=parseInt((e.id+100).toString()+t.id.toString()),this.name=e.name+" "+t.name},Book.prototype.generatorAuthor=function(){this.author=authorName[Math.floor(Math.random()*authorName.length)]},Book.prototype.generatorGenre=function(){var e=genre[Math.floor(Math.random()*genre.length)];this.genre=e.name},Book.prototype.generatorPublishDate=function(){var e=new Date("1700-01-01"),t=new Date;this.pdate=new Date(e.getTime()+Math.random()*(t.getTime()-e.getTime())).toISOString().substr(0,10)};var ToolBarService=function(){function e(e,t,n){var r=i[e](t,n);return BookStore.updateView(r)}function t(e){function t(e,t){return e-t}function n(n,r){return a[e].order?t(n.idOrderName,r.idOrderName):t(r.idOrderName,n.idOrderName)}function r(n,r){return a[e].order?t(n.author.id,r.author.id):t(r.author.id,n.author.id)}function o(t){return t.sort(function(t,n){return i[e](t,n)})}var i={name:n,"author.name":r,default:!1};return a[e].order=!a[e].order,o(BookStore.getView())}function n(e,t){function n(e){return e.genre.indexOf(a.genre.value.toLowerCase())!=-1}function r(e){return void 0===a["author.gender"].value||e.author.gender==a["author.gender"].value}function o(){return BookStore.getAll().filter(function(e){return n(e)&&r(e)})}return a[e].value=t,o()}function r(e,t){function n(e){return 9==e.getMonth()&&31==e.getDate()}function r(e){var t=new Date(e.getFullYear(),e.getMonth()+1,0);return 5==e.getDay()&&t.getDate()-e.getDate()<7}function i(){return(o(BookStore.getAll(),e)[t]||[]).filter(function(t){return u[a[e].indicate](new Date(t.pdate))})}var u={horror:n,finance:r,default:!1};return a[e].indicate=a[e].value=t,i()}function o(e,t){return e.reduce(function(e,n){return(e[n[t]]=e[n[t]]||[]).push(n),e},{})}var a={idOrderName:{value:"",op:"",indicate:"",order:!1},name:{value:"",indicate:"",order:!1},genre:{value:"",indicate:"",order:!1},"author.id":{value:"",order:!1},"author.name":{value:"",order:!1},"author.gender":{value:void 0,order:!1},default:!1},i={sort:t,filter:n,indicate:r,default:!1};return{query:e}}(),List=function(){function e(e){var n=Math.floor(Math.abs(e)/u),r=n+ITEM_NUM_PER_PAGE;return i.innerHTML="",i.appendChild(t(BookStore.getPage(n,r+1))),!0}function t(e){for(var t=document.createDocumentFragment(),r=e.length,o=0;o<r;o++){var a=document.createElement("li");a.innerHTML=n(e[o]),a.style.height=u+"px",t.appendChild(a)}return t}function n(e){var t=u-10;return"<div class='box-book'><div style='float:left;width:100px;'><img style='height:"+t+"px' src='"+genreCover[e.genre]+"' /></div><div><p><a>"+(e.id+1)+". "+e.name+" </a><label><em>"+e.pdate+"</em></label></p><p><label>by "+e.author.name+"</label><mark> "+e.genre+"</mark></p></div></div>"}function r(){var e,t,n=1,r=0,a="mousedown",i="mouseup";Utils.isMobile.any()&&(a="touchstart",i="touchend");var c=document.querySelector("#scrollDown");c.addEventListener(a,function(t){var a=BookStore.getNumBooksView()*u;e=setInterval(function(){o=o+n>a?a-u:o+n,o<=a&&List.getTemplate(o),n+=r,r++},6),t.stopPropagation&&t.stopPropagation()},!1),c.addEventListener(i,function(t){clearInterval(e),n=1,r=0,t.stopPropagation&&t.stopPropagation()},!1),c=document.querySelector("#scrollUp"),c.addEventListener(a,function(e){t=setInterval(function(){o=o-n<0?0:o-n,o>-u&&List.getTemplate(o),n+=r,r++},6),e.stopPropagation&&e.stopPropagation()},!1),c.addEventListener(i,function(e){clearInterval(t),n=1,r=0,e.stopPropagation&&e.stopPropagation()},!1)}var o=0,a=document.querySelector(".virtual-container"),i=document.querySelector(".virtual-list"),u=Math.floor(a.offsetHeight/ITEM_NUM_PER_PAGE);return r(),{getTemplate:e}}();!function(){function e(){t(),n(),r(),o(),a()}function t(){var e=document.querySelector(".menuGenres"),t=document.createElement("li");t.classList.add("list-genre"),t.id="";var n=document.createElement("a");return n.innerHTML="All",t.appendChild(n),e.appendChild(t),genre.forEach(function(t){var n=document.createElement("li");n.classList.add("list-genre"),n.id=t.name;var r=document.createElement("a");r.innerHTML=t.name,n.appendChild(r),e.appendChild(n)}),e=document.querySelector(".menuMore"),special.forEach(function(t){var n=document.createElement("li");n.classList.add("list-genre"),n.classList.add(t.key);var r=document.createElement("a");r.innerHTML=t.title,n.appendChild(r),e.appendChild(n)}),!0}function n(){var e=document.querySelector("#btnGenerateListBook");e.addEventListener("click",function(e){e.stopPropagation&&e.stopPropagation(),BookStore.create().then(function(){i(0)})},!1)}function r(){var e=document.querySelector("#btnSortListBookByName");e.addEventListener("click",function(e){e.stopPropagation&&e.stopPropagation(),ToolBarService.query("sort","name").then(function(){i(0)})},!1),e=document.querySelector("#btnSortListBookByAuthorName"),e.addEventListener("click",function(e){e.stopPropagation&&e.stopPropagation(),ToolBarService.query("sort","author.name").then(function(){i(0)})},!1)}function o(){for(var e=document.querySelectorAll(".list-genre"),t=0;t<e.length;t++)e[t].addEventListener("click",function(e){e.stopPropagation&&e.stopPropagation(),ToolBarService.query("filter","genre",this.id).then(function(){i(0)})},!1);var n=document.querySelector("#btnGenerateFilterByAuthorGenderM");n.addEventListener("click",function(e){e.stopPropagation&&e.stopPropagation(),document.querySelector("#btnGenerateFilterByAuthorGenderF").checked=!1;var t=this.checked?0:void 0;ToolBarService.query("filter","author.gender",t).then(function(){i(0)})},!1),n=document.querySelector("#btnGenerateFilterByAuthorGenderF"),n.addEventListener("click",function(e){e.stopPropagation&&e.stopPropagation(),document.querySelector("#btnGenerateFilterByAuthorGenderM").checked=!1;var t=this.checked?1:void 0;ToolBarService.query("filter","author.gender",t).then(function(){i(0)})},!1)}function a(){var e=document.querySelector(".finance");e.addEventListener("click",function(e){e.stopPropagation&&e.stopPropagation(),ToolBarService.query("indicate","genre","finance").then(function(){i(0)})},!1),e=document.querySelector(".horror"),e.addEventListener("click",function(e){e.stopPropagation&&e.stopPropagation(),ToolBarService.query("indicate","genre","horror").then(function(){i(0)})},!1)}function i(e){return List.getTemplate(e),!0}e()}();var BookStore=function(){function e(){var e=NUM_BOOK/100;return t(0),new Promise(function(n){function r(o){setTimeout(function(){for(var a=0;a<e;a++)u[o]=new Book(o),o++;t(o),o===e&&List.getTemplate(0),o===NUM_BOOK?n(u):r(o)},50)}r(0)})}function t(e){return l.style.width=e/NUM_BOOK*100+"%",!0}function n(){return u}function r(){return c}function o(e){return c=a()?e:u,d=c.length,Promise.resolve(c)}function a(){return c.length}function i(e,t){return c=c.length?c:u,t=t>c.length?c.length:t,c.slice(e,t+1)}var u=[],c=[],d=0,l=document.querySelector(".live");return{create:e,getAll:n,getView:r,updateView:o,getPage:i,getNumBooksView:a}}();window.onload=function(){};
//# sourceMappingURL=maps/js.min.js.map
